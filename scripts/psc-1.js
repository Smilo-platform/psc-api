a = eth.accounts[0];
web3.eth.defaultAccount = a;

var abi = [{
    "constant": true,
    "inputs": [],
    "name": "storedData",
    "outputs": [{"name": "", "type": "string"}],
    "payable": false,
    "stateMutability": "view",
    "type": "function"
}, {
    "constant": false,
    "inputs": [{"name": "x", "type": "string"}],
    "name": "set",
    "outputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "function"
}, {
    "constant": true,
    "inputs": [],
    "name": "get",
    "outputs": [{"name": "retVal", "type": "string"}],
    "payable": false,
    "stateMutability": "view",
    "type": "function"
}, {
    "inputs": [{"name": "initVal", "type": "string"}],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "constructor"
}];

var bytecode = "0x608060405234801561001057600080fd5b506040516105a63803806105a68339810180604052602081101561003357600080fd5b81019080805164010000000081111561004b57600080fd5b8281019050602081018481111561006157600080fd5b815185600182028301116401000000008211171561007e57600080fd5b5050929190505050806000908051906020019061009c9291906100a3565b5050610148565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100e457805160ff1916838001178555610112565b82800160010185558215610112579182015b828111156101115782518255916020019190600101906100f6565b5b50905061011f9190610123565b5090565b61014591905b80821115610141576000816000905550600101610129565b5090565b90565b61044f806101576000396000f3fe608060405234801561001057600080fd5b506004361061005e576000357c0100000000000000000000000000000000000000000000000000000000900480632a1afcd9146100635780634ed3885e146100e65780636d4ce63c146101a1575b600080fd5b61006b610224565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100ab578082015181840152602081019050610090565b50505050905090810190601f1680156100d85780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b61019f600480360360208110156100fc57600080fd5b810190808035906020019064010000000081111561011957600080fd5b82018360208201111561012b57600080fd5b8035906020019184600183028401116401000000008311171561014d57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506102c2565b005b6101a96102dc565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101e95780820151818401526020810190506101ce565b50505050905090810190601f1680156102165780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102ba5780601f1061028f576101008083540402835291602001916102ba565b820191906000526020600020905b81548152906001019060200180831161029d57829003601f168201915b505050505081565b80600090805190602001906102d892919061037e565b5050565b606060008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103745780601f1061034957610100808354040283529160200191610374565b820191906000526020600020905b81548152906001019060200180831161035757829003601f168201915b5050505050905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106103bf57805160ff19168380011785556103ed565b828001600101855582156103ed579182015b828111156103ec5782518255916020019190600101906103d1565b5b5090506103fa91906103fe565b5090565b61042091905b8082111561041c576000816000905550600101610404565b5090565b9056fea165627a7a7230582099c8850c5c3694c0f85f361f776a68c6c508531fcadad9160475f06919bb6c8c0029";

var simpleContract = web3.eth.contract(abi);

var identity = {
    version: "1.0.0",
    name: "John Smith",
    biometrics: [-0.156581810760198, 0.108158265852249, 0.0701104715071144, 0.00818897849991918, -0.148048011217087, -0.0248858612080745, -0.0872828481127479, -0.0851915562689804, 0.180506821187884, -0.120072446718515, 0.218691844261169, -0.00579178888182471, -0.209044848914125, 0.0562758889588165, -0.0211886748217707, 0.122166900467878, -0.188191021299862, -0.0718560191892899, -0.0679687110598088, -0.119467758821762, 0.105866826868584, 0.0810681520199776, -0.0912255968688128, 0.0812777571678161, -0.148581718206416, -0.281985691888491, -0.0699810885704042, -0.048942755907774, 0.0204245448112485, -0.0985440818816076, -0.0122818554480652, 0.116750881058784, -0.0858440998792648, 0.015128769818097, 0.0249869855887175, 0.142501816285188, -0.0786467242240906, -0.0570571906864648, 0.216542258858681, 0.0989154106878555, -0.187174025177956, -0.00179425755050088, 0.0605879976882188, 0.297855741262486, 0.129471495747566, 0.0711448849719048, 0.0847610078752041, -0.0199009285948824, 0.188856288807076, -0.2561274766922, 0.0892466299285821, 0.197778195142746, 0.0628072028891724, 0.112028650939465, 0.0938111767172813, -0.201885193586349, 0.0299710985273123, 0.0852722823619843, -0.175573989748955, 0.0867164582014084, 0.0825403928756714, -0.177769154310226, -0.0289442017674446, -0.0821325108408928, 0.184202238917351, 0.141564607620239, -0.100739546120167, -0.144596204161644, 0.0994244292378426, -0.209675684571266, -0.141970992088318, 0.103580884635448, -0.114130280911922, -0.177856177091599, -0.265990704298019, 0.0514868460595608, 0.357953608036041, 0.230197921395302, -0.11946002393961, 0.0226255897432566, 0.0513543076813221, -0.0451449640095234, 0.143587529659271, 0.116492860019207, -0.0829241350293159, -0.0119040673598647, -0.126517102122307, 0.0516437627375126, 0.19557997584343, 0.053418081253767, -0.0486750453710556, 0.240631580352783, 0.0371070131659508, 0.0520365536212921, 0.0157100297510624, 0.0305727906525135, -0.11266615241766, -0.0598121397197247, -0.0691818073391914, -0.029722448438406, 0.0687834620475769, -0.0670681521296501, -0.00570722157135606, 0.0772911608219147, -0.136720269918442, 0.161194235086441, -0.0991989001631737, 0.050849836319685, -0.0946008414030075, -0.0160996615886688, -0.17207145690918, 0.0770833343267441, 0.160415530204773, -0.214637413620949, 0.150868624448776, 0.137984186410904, -0.00441318936645985, 0.131076514720917, 0.139769434928894, 0.0486638434231281, -0.0226839762181044, -0.0777718126773834, -0.186755150556564, -0.0951473712921143, 0.0598282627761364, -0.0334000140428543, 0.0936317667365074, 0.0134512335062027]
};

simpleContract.new(JSON.stringify(identity), {
    from: web3.eth.accounts[0],
    data: bytecode,
    gas: 0x47b760,
    gasPrice:0,
    sharedWith: ["rOHG3a8UzW7qKNRe9y5ymKbcebTRr+5nJC5TDaI3QV8="]
}, function (e, contract) {
    if (e) {
        console.log("err creating contract", e);
    } else {
        if (!contract.address) {
            console.log("Contract transaction send: TransactionHash: " + contract.transactionHash + " waiting to be mined...");
        }
    }
});
